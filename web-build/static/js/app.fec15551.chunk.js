(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{251:function(e,t,r){e.exports=r.p+"static/media/spinner.4678ba0f.svg"},252:function(e){e.exports=JSON.parse('{"hereApiKey":"fcTWGanSpMKDJsC4iLtAP2kNPmpQKIZ1EgFzNKemGh8"}')},272:function(e,t,r){"use strict";r.d(t,"a",(function(){return ve}));var a=r(0),n=r.n(a),o=r(3),s=r(237),i=r(453),c=r(180),u=r(5),l=r(24),d=r(82),p=r(1),m=r.n(p);function f(e){var t=e.temp,r=e.icon;return n.a.createElement(u.a,{style:g.container},n.a.createElement(l.a,{style:g.text},t,"\xb0C"),n.a.createElement(d.a,{style:g.tinyLogo,source:"https://yastatic.net/weather/i/icons/blueye/color/svg/"+r+".svg"}))}f.propTypes={temp:m.a.number.isRequired,icon:m.a.string.isRequired};var g=o.a.create({container:{padding:"20px",width:"200px",height:"100px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",borderRadius:5,boxSizing:"content-box",backgroundColor:"rgba(255, 255, 255, 0.2)"},tinyLogo:{width:100,height:100},text:{fontSize:"2rem"}}),y=r(251),h=r.n(y);function b(e){var t=e.children;return t?n.a.createElement(l.a,{style:x.content},t):n.a.createElement(l.a,{style:x.content_stub},n.a.createElement(d.a,{style:x.spinner,source:h.a}))}b.propTypes={children:m.a.node};var x=o.a.create({content:{backgroundColor:"rgba(255, 255, 255, 0.2)",padding:"5px",borderRadius:"5px",maxWidth:"200px",textAlign:"center",fontSize:"1.1rem",fontWeight:"500"},content_stub:{width:"240px",height:"140px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.2)",padding:"5px",borderRadius:"5px",textAlign:"center",fontSize:"1.1rem",fontWeight:"500"},spinner:{height:"3rem",width:"3rem"}});function v(e){var t=e.weather;if(!t)return n.a.createElement(b,{text:null});var r=t.icon,a=t.temp;return n.a.createElement(f,{temp:a,icon:r})}function E(e){var t=e.address,r=e.weather,a=e.coordinates;return n.a.createElement(u.a,{style:w.container},n.a.createElement(v,{weather:r}),n.a.createElement(b,null,t),n.a.createElement(b,null,a?a.Latitude+", "+a.Longitude:null))}v.propTypes={weather:m.a.object},E.propTypes={coordinates:m.a.exact({Latitude:m.a.number.isRequired,Longitude:m.a.number.isRequired}),address:m.a.string.isRequired,weather:m.a.object};var w=o.a.create({container:{padding:"30px",flex:1,backgroundImage:"linear-gradient(141deg, #a1c4fd 0%, #c2e9fb 75%)",alignItems:"center",justifyContent:"space-evenly"}}),R=r(21),S=r.n(R),L=r(12),q=r.n(L),T=r(273),j="ADD_TO_HISTORY",k="SET_LOCATION",H="SET_WEATHER",I="SET_HISTORY",P="CLEAR_HISTORY",C=r(173),O=r.n(C),A=O.a.create({baseURL:"https://reverse.geocoder.ls.hereapi.com/6.2"}),D=O.a.create({baseURL:"https://us-central1-native-weather-server.cloudfunctions.net/app"}),W=r(252),z=r(146),F=r.n(z),N=r(45),_=function(e,t){var r;return q.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return r="reversegeocode.json?apiKey="+W.hereApiKey+"&mode=retrieveAddresses&language=en&prox="+e+","+t,a.next=3,q.a.awrap(A.get(r).then((function(e){return e.data.Response.View[0].Result[0].Location})).catch((function(e){N.a.alert("Error(getAddressFromCoordinates)",e.message),console.error("Error(getAddressFromCoordinates)",e.message)})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),null,null,null,Promise)},B=function(e,t){var r;return q.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return r="forecast?lat="+e+"&lon="+t+"&limit=1",a.next=3,q.a.awrap(D.get(r).then((function(e){return e.data})).catch((function(e){N.a.alert("Error(getWeather)",e.message),console.error("Error(getWeather)",e.message)})));case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}}),null,null,null,Promise)},J=function(e){return q.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.a.awrap(F.a.setItem("history",JSON.stringify(e)));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),N.a.alert("Error(setHistoryToAS)",t.t0.message),console.error("Error(setHistoryToAS)",t.t0.message);case 9:case"end":return t.stop()}}),null,null,[[0,5]],Promise)},K=function(){var e,t;return q.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,q.a.awrap(F.a.getItem("history"));case 3:if(null!==(e=r.sent)){r.next=6;break}return r.abrupt("return",[]);case 6:return t=""!=e?JSON.parse(e):[],r.abrupt("return",t);case 10:r.prev=10,r.t0=r.catch(0),N.a.alert("Error(getHistoryFromAS)",r.t0.message),console.error("Error(getHistoryFromAS)",r.t0.message);case 14:case"end":return r.stop()}}),null,null,[[0,10]],Promise)},Y=function(e){return function(t){var r;return q.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,q.a.awrap(K());case 3:r=a.sent,J([].concat(S()(r),[e])),t((function(e){var t;return q.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,q.a.awrap(K());case 3:t=r.sent,e(G(t)),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),N.a.alert("Error(updateHistory)",r.t0.message);case 10:case"end":return r.stop()}}),null,null,[[0,7]],Promise)})),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),N.a.alert("Error(addToHistory)",a.t0.message),console.error("Error(addToHistory)",a.t0.message);case 12:case"end":return a.stop()}}),null,null,[[0,8]],Promise)}},G=function(e){return{type:I,history:e}},M=function(e){return{type:H,weather:e}},U=r(81),Q=function(e){return e.forecast.history},V=function(e){return e.forecast.location};function Z(e){var t=e.location,r=e.getForecast;return Object(a.useEffect)((function(){r()}),[]),n.a.createElement(E,{address:t.address,weather:t.weather,coordinates:t.coordinates})}Z.propTypes={location:m.a.exact({coordinates:m.a.exact({Latitude:m.a.number.isRequired,Longitude:m.a.number.isRequired}),address:m.a.string.isRequired,weather:m.a.object}),getForecast:m.a.func.isRequired};var X=Object(U.b)((function(e){return{location:V(e)}}),{getForecast:function(){return function(e){T.a.getCurrentPosition((function(t){var r,a;return q.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,q.a.awrap(_(t.coords.latitude,t.coords.longitude));case 3:return r=n.sent,e((o=r.Address.Label,s=r.DisplayPosition,{type:k,address:o,coordinates:s})),n.next=7,q.a.awrap(B(r.DisplayPosition.Latitude,r.DisplayPosition.Longitude));case 7:a=n.sent,e(M(a.fact)),e(Y({location:r.DisplayPosition,address:r.Address.Label,weather:a.fact,time:Date.now()})),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),N.a.alert("Error :(","check your internet connection"),console.error("Error(addToHistory)","check your internet connection");case 16:case"end":return n.stop()}var o,s}),null,null,[[0,12]],Promise)}),(function(e){N.a.alert("Error(getForecast)",e.message),console.error("Error(addToHistory)",e.message)}),{enableHighAccuracy:!1,timeout:1e4,maximumAge:1e5})}}})(Z),$=r(13),ee=r.n($),te=r(258),re=r(133),ae=r(171),ne=r(131);function oe(e){var t=e.item,r=e.onPress,a=t.location.Latitude+", "+t.location.Longitude;return n.a.createElement(ne.a,{style:se.container,onPress:function(){return r(t.time)}},n.a.createElement(l.a,{style:se.coordinates},a),n.a.createElement(u.a,{style:se.info},n.a.createElement(l.a,{style:se.address},t.address),n.a.createElement(l.a,{style:se.time},new Date(t.time).toISOString())))}oe.propTypes={item:m.a.exact({location:m.a.exact({Latitude:m.a.number.isRequired,Longitude:m.a.number.isRequired}),address:m.a.string.isRequired,weather:m.a.object.isRequired,time:m.a.number.isRequired}),onPress:m.a.func.isRequired};var se=o.a.create({container:{width:"300px",height:"100px",padding:5,marginBottom:10,display:"flex",backgroundColor:"#f0f",alignItems:"flex-end",justifyContent:"space-evenly",backgroundColor:"rgba(255, 255, 255, 0.2)",borderRadius:"5px"},info:{display:"flex",flexDirection:"row",justifyContent:"space-around"},time:{width:"115px"},address:{width:"175px"},coordinates:{fontSize:"0.7rem"}});function ie(e){var t=e.history,r=e.clearHistory,a=e.onPress;return n.a.createElement(te.a,{style:ce.container},n.a.createElement(ae.a,{style:ce.list,data:t,renderItem:function(e){var t=e.item;return n.a.createElement(oe,{onPress:a,item:t})},keyExtractor:function(e){return e.time.toString()}}),n.a.createElement(re.a,{onPress:r,title:"Clean history",color:"#005fad"}))}ie.propTypes={history:m.a.arrayOf({location:m.a.exact({Latitude:m.a.number.isRequired,Longitude:m.a.number.isRequired}),address:m.a.string.isRequired,weather:m.a.object.isRequired,time:m.a.number.isRequired}),clearHistory:m.a.func.isRequired,onPress:m.a.func.isRequired};var ce=o.a.create({container:{paddingTop:10,flex:1,backgroundImage:"linear-gradient(141deg, #a1c4fd 0%, #c2e9fb 75%)"},list:{marginBottom:10,alignSelf:"center"}});function ue(){return n.a.createElement(u.a,{style:le.container},n.a.createElement(b,{style:le.content},"It's empty :("))}var le=o.a.create({container:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundImage:"linear-gradient(to top, #ace0f9 0%, #a1c4fd 100%)"},content:{padding:"5px",fontSize:"1.3rem"}});ie.propTypes={history:m.a.arrayOf({location:m.a.exact({Latitude:m.a.number.isRequired,Longitude:m.a.number.isRequired}),address:m.a.string.isRequired,weather:m.a.object.isRequired,time:m.a.number.isRequired}),clearHistory:m.a.func.isRequired};var de=Object(U.b)((function(e){return{history:Q(e)}}),{clearHistory:function(){return q.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.a.awrap(F.a.setItem("history",[]));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),N.a.alert("Error(clearHistoryInAS)",e.t0.message),console.error("Error(clearHistoryInAS)",e.t0.message);case 9:case"end":return e.stop()}}),null,null,[[0,5]],Promise),{type:P}}})((function(e){var t=e.history,r=e.clearHistory,o=Object(a.useState)(null),s=ee()(o,2),i=s[0],c=s[1];if(i){var l=t.filter((function(e){return e.time===i}))[0];return n.a.createElement(u.a,{style:{flex:1}},n.a.createElement(E,{address:l.address,coordinates:l.location,weather:l.weather}),n.a.createElement(re.a,{title:"Close",color:"#005fad",onPress:function(){return c(null)}}))}return t.length?n.a.createElement(ie,{history:t,clearHistory:r,onPress:function(e){return c(e)}}):n.a.createElement(ue,null)})),pe=r(259),me=r(63),fe=r(260),ge=r(261),ye=Object(ge.a)((function(e,t){switch(t.type){case I:return e.history=t.history,e;case P:return e.history=[],e;case j:return e.location=t.payload,e;case k:return e.location.coordinates=t.coordinates,e.location.address=t.address,e;case H:return e.location.weather=t.weather,e;default:return e}}),{location:{address:"",weather:null,coordinates:null},history:[]}),he=Object(me.combineReducers)({forecast:ye}),be=Object(me.createStore)(he,Object(fe.composeWithDevTools)(Object(me.applyMiddleware)(pe.a))),xe=Object(i.a)();function ve(){return n.a.createElement(U.a,{store:be},n.a.createElement(s.a,null,n.a.createElement(xe.Navigator,{initialRouteName:"Weather",tabBarOptions:{activeTintColor:"#005fad"}},n.a.createElement(xe.Screen,{name:"Weather",component:X,options:{tabBarLabel:"Weather",tabBarIcon:function(e){var t=e.color,r=e.size;return n.a.createElement(c.a,{name:"apple-icloud",color:t,size:r})}}}),n.a.createElement(xe.Screen,{name:"History",component:de,options:{tabBarLabel:"History",tabBarIcon:function(e){var t=e.color,r=e.size;return n.a.createElement(c.a,{name:"history",color:t,size:r})}}}))))}o.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},281:function(e,t,r){r(282),e.exports=r(442)},282:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))}},[[281,1,2]]]);
//# sourceMappingURL=app.fec15551.chunk.js.map